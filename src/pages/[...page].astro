---
import type { CollectionEntry } from "astro:content";
import type { Page, PaginateFunction } from "astro";

import Pagination from "@/components/Pagination.astro";
import PostPage from "@/components/PostPage.astro";
import MainGridLayout from "@/layouts/MainGridLayout.astro";
import { getSortedBlogs } from "@/utils/content-utils";

interface Props {
  page: Page<CollectionEntry<"blog">>;
}

export async function getStaticPaths({ paginate }: { paginate: PaginateFunction }) {
  const allBlogPosts = await getSortedBlogs();
  return paginate(allBlogPosts, { pageSize: 1 });
}

const { page } = Astro.props;
---

<MainGridLayout>
  <PostPage page={page} />
  <Pagination page={page} />
</MainGridLayout>